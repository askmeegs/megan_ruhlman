#Megan's Flask app for the Ruhlman project (part 4)
#5/3/16

# -*- coding: utf-8 -*-
from flask import Flask, render_template
from flask.ext.bootstrap import Bootstrap
from flask.ext.wtf import Form
from wtforms import SelectField, SubmitField
#from wtforms.validators import Required, Length
import random, json, plotly
import pandas as pd

app = Flask(__name__)
app.config['SECRET_KEY'] = 'top secret!'
bootstrap = Bootstrap(app)

# counts dictionary - I generated this from my categorical ipython notebook.
countsDct = {'2003': [('Religion', 3), ('English', 11), ('Theatre Studies', 1), ('Classical Studies', 1), ('Japanese', 2), ('History', 5), ('Economics', 7), ('Political Science', 21), ('Chemistry', 14), ('Biological Sciences', 12), ('Physics', 7), ('Africana Studies', 1), ('Art', 8), ('Education', 2), ("Women's and Gender Studies", 4), ('Psychology', 15), ('Astronomy', 2), ('Anthropology', 3), ('Jewish Studies', 1), ('Geology', 1), ('French', 3), ('Philosophy', 7), ('Sociology', 6), ('Spanish', 6), ('Mathematics', 3), ('Writing', 1), ('Environmental Studies', 1), ('Unspecified', 2), ('Music', 7), ('Computer Science', 3), ('Religion', 3), ('English', 11), ('Theatre Studies', 1), ('Classical Studies', 1), ('Japanese', 2), ('History', 5), ('Economics', 7), ('Political Science', 21), ('Chemistry', 14), ('Biological Sciences', 12), ('Physics', 7), ('Africana Studies', 1), ('Art', 8), ('Education', 2), ("Women's and Gender Studies", 4), ('Psychology', 15), ('Astronomy', 2), ('Anthropology', 3), ('Jewish Studies', 1), ('Geology', 1), ('French', 3), ('Philosophy', 7), ('Sociology', 6), ('Spanish', 6), ('Mathematics', 3), ('Writing', 1), ('Environmental Studies', 1), ('Unspecified', 2), ('Music', 7), ('Computer Science', 3)], '2015': [('English', 3), ('Peace and Justice Studies', 2), ('Chemistry', 15), ('Sociology', 6), ('Computer Science', 11), ('Education', 1), ('Cinema and Media Studies', 1), ('Theatre Studies', 1), ('East Asian Studies', 3), ('South Asian Studies', 1), ('Music', 5), ('Astronomy', 5), ('Mathematics', 1), ("Women's and Gender Studies", 7), ('Biological Sciences', 15), ('Physics', 3), ('History', 4), ('Cognitive and Linguistic Sciences', 1), ('French', 3), ('Art', 12), ('Religion', 3), ('Unspecified', 5), ('Psychology', 11), ('Neuroscience', 3), ('Geosciences', 2), ('Spanish', 1), ('Environmental Studies', 5), ('Economics', 7), ('Political Science', 11), ('Writing', 4), ('English', 3), ('Peace and Justice Studies', 2), ('Chemistry', 15), ('Sociology', 6), ('Computer Science', 11), ('Education', 1), ('Cinema and Media Studies', 1), ('Theatre Studies', 1), ('East Asian Studies', 3), ('South Asian Studies', 1), ('Music', 5), ('Astronomy', 5), ('Mathematics', 1), ("Women's and Gender Studies", 7), ('Biological Sciences', 15), ('Physics', 3), ('History', 4), ('Cognitive and Linguistic Sciences', 1), ('French', 3), ('Art', 12), ('Religion', 3), ('Unspecified', 5), ('Psychology', 11), ('Neuroscience', 3), ('Geosciences', 2), ('Spanish', 1), ('Environmental Studies', 5), ('Economics', 7), ('Political Science', 11), ('Writing', 4)], '2014': [("Women's and Gender Studies", 6), ('Computer Science', 10), ('Cognitive and Linguistic Sciences', 1), ('French', 2), ('Biological Sciences', 8), ('Human Rights', 3), ('History', 7), ('Political Science', 5), ('Economics', 8), ('Unspecified', 1), ('Media Arts and Sciences', 1), ('Religion', 1), ('Geosciences', 3), ('Architecture', 2), ('Environmental Studies', 5), ('Urban Studies', 1), ('Psychology', 11), ('Sociology', 5), ('Classical Civilization', 1), ('Neuroscience', 9), ('Chinese', 1), ('Spanish', 1), ('Medieval/Renaissance Studies', 1), ('Art Studio', 1), ('Education', 3), ('Art History', 3), ('Chemistry', 7), ('Music', 6), ('Theatre Studies', 4), ('American Studies', 4), ('Anthropology', 1), ('Mathematics', 2), ('Astronomy', 1), ('Cinema and Media Studies', 1), ('Physics', 5), ('English', 6), ('Biological Chemistry', 3), ("Women's and Gender Studies", 6), ('Computer Science', 10), ('Cognitive and Linguistic Sciences', 1), ('French', 2), ('Biological Sciences', 8), ('Human Rights', 3), ('History', 7), ('Political Science', 5), ('Economics', 8), ('Unspecified', 1), ('Media Arts and Sciences', 1), ('Religion', 1), ('Geosciences', 3), ('Architecture', 2), ('Environmental Studies', 5), ('Urban Studies', 1), ('Psychology', 11), ('Sociology', 5), ('Classical Civilization', 1), ('Neuroscience', 9), ('Chinese', 1), ('Spanish', 1), ('Medieval/Renaissance Studies', 1), ('Art Studio', 1), ('Education', 3), ('Art History', 3), ('Chemistry', 7), ('Music', 6), ('Theatre Studies', 4), ('American Studies', 4), ('Anthropology', 1), ('Mathematics', 2), ('Astronomy', 1), ('Cinema and Media Studies', 1), ('Physics', 5), ('English', 6), ('Biological Chemistry', 3)], '2016': [('Computer Science', 5), ('Psychology', 18), ('Physics', 4), ('French', 3), ('Biological Sciences', 11), ('Brain and Cognitive Sciences', 1), ('Chemistry', 4), ('Education', 3), ('Political Science', 6), ('Art Studio', 1), ('Astronomy', 1), ('International Relations', 1), ('Mathematics', 3), ('Studio Art', 1), ('Economics', 6), ('Italian Studies', 1), ('Art', 6), ('Music', 3), ('History', 6), ('Peace and Justice Studies', 1), ('Religion', 1), ('Anthropology', 2), ('Spanish', 3), ('Africana Studies', 2), ('East Asian Studies', 6), ('Writing', 2), ('Geosciences', 2), ('Classical Studies', 3), ('Sociology', 2), ('Art History', 1), ('Unspecified', 45), ('American Studies', 1), ('Biochemistry', 2), ('Neuroscience', 3), ('Philosophy', 3), ('English', 9), ("Women's and Gender Studies", 8), ('Computer Science', 5), ('Psychology', 18), ('Physics', 4), ('French', 3), ('Biological Sciences', 11), ('Brain and Cognitive Sciences', 1), ('Chemistry', 4), ('Education', 3), ('Political Science', 6), ('Art Studio', 1), ('Astronomy', 1), ('International Relations', 1), ('Mathematics', 3), ('Studio Art', 1), ('Economics', 6), ('Italian Studies', 1), ('Art', 6), ('Music', 3), ('History', 6), ('Peace and Justice Studies', 1), ('Religion', 1), ('Anthropology', 2), ('Spanish', 3), ('Africana Studies', 2), ('East Asian Studies', 6), ('Writing', 2), ('Geosciences', 2), ('Classical Studies', 3), ('Sociology', 2), ('Art History', 1), ('Unspecified', 45), ('American Studies', 1), ('Biochemistry', 2), ('Neuroscience', 3), ('Philosophy', 3), ('English', 9), ("Women's and Gender Studies", 8)], '2011': [('Art', 9), ("Women's and Gender Studies", 4), ('Philosophy', 2), ('Psychology', 14), ('Spanish', 4), ('Sociology', 11), ('Environmental Studies', 5), ('Religion', 1), ('Cinema and Media Studies', 2), ('American Studies', 1), ('Mathematics', 1), ('Cognitive and Linguistic Sciences', 1), ('Neuroscience', 8), ('English', 14), ('Music', 8), ('Computer Science', 4), ('Economics', 10), ('Political Science', 6), ('Geosciences', 2), ('Peace and Justice Studies', 4), ('Chemistry', 17), ('Biological Sciences', 19), ('Physics', 3), ('History', 3), ('Education', 2), ('Theatre Studies', 2), ('French', 5), ('Biology', 1), ('Astronomy', 1), ('Anthropology', 3), ('Art', 9), ("Women's and Gender Studies", 4), ('Philosophy', 2), ('Psychology', 14), ('Spanish', 4), ('Sociology', 11), ('Environmental Studies', 5), ('Religion', 1), ('Cinema and Media Studies', 2), ('American Studies', 1), ('Mathematics', 1), ('Cognitive and Linguistic Sciences', 1), ('Neuroscience', 8), ('English', 14), ('Music', 8), ('Computer Science', 4), ('Economics', 10), ('Political Science', 6), ('Geosciences', 2), ('Peace and Justice Studies', 4), ('Chemistry', 17), ('Biological Sciences', 19), ('Physics', 3), ('History', 3), ('Education', 2), ('Theatre Studies', 2), ('French', 5), ('Biology', 1), ('Astronomy', 1), ('Anthropology', 3)], '2010': [('Writing', 2), ('Political Science', 14), ('South Asian Studies', 1), ('Neuroscience', 7), ('Computer Science', 2), ('Geosciences', 6), ('Economics', 18), ('Physics', 1), ('Italian Studies', 2), ('Chemistry', 19), ('Anthropology', 5), ('Biological Sciences', 26), ('Africana Studies', 1), ('Theatre Studies', 1), ('History', 5), ('Education', 1), ('French', 6), ('Art', 2), ('Astronomy', 1), ('East Asian Studies', 2), ('Environmental Studies', 5), ("Women's and Gender Studies", 5), ('Sociology', 5), ('Philosophy', 2), ('Psychology', 16), ('Spanish', 2), ('English', 8), ('Jewish Studies', 3), ('Unspecified', 3), ('Physical Education', 3), ('American Studies', 1), ('Religion', 3), ("Women's and  Gender Studies", 1), ('Music', 9), ('Writing', 2), ('Political Science', 14), ('South Asian Studies', 1), ('Neuroscience', 7), ('Computer Science', 2), ('Geosciences', 6), ('Economics', 18), ('Physics', 1), ('Italian Studies', 2), ('Chemistry', 19), ('Anthropology', 5), ('Biological Sciences', 26), ('Africana Studies', 1), ('Theatre Studies', 1), ('History', 5), ('Education', 1), ('French', 6), ('Art', 2), ('Astronomy', 1), ('East Asian Studies', 2), ('Environmental Studies', 5), ("Women's and Gender Studies", 5), ('Sociology', 5), ('Philosophy', 2), ('Psychology', 16), ('Spanish', 2), ('English', 8), ('Jewish Studies', 3), ('Unspecified', 3), ('Physical Education', 3), ('American Studies', 1), ('Religion', 3), ("Women's and  Gender Studies", 1), ('Music', 9)], '2013': [('Neuroscience', 9), ('Religion', 3), ('South Asian Studies', 2), ('Environmental Studies', 4), ('Astronomy', 3), ('Anthropology', 9), ('East Asian Studies', 4), ('Computer Science', 6), ('Education', 1), ('English', 18), ("Women's and Gender Studies", 5), ('Philosophy', 2), ('Biological Sciences', 15), ('Physics', 4), ('Italian Studies', 2), ('History', 7), ('Classical Studies', 2), ('Theatre Studies', 1), ('Sociology', 13), ('Africana Studies', 2), ('Music', 5), ('Political Science', 1), ('Art', 9), ('Unspecified', 6), ('Russian', 1), ('Spanish', 2), ('Art History', 1), ('French', 3), ('Geosciences', 2), ('Economics', 1), ('Peace and Justice Studies', 3), ('Chemistry', 20), ('Psychology', 15), ('Neuroscience', 9), ('Religion', 3), ('South Asian Studies', 2), ('Environmental Studies', 4), ('Astronomy', 3), ('Anthropology', 9), ('East Asian Studies', 4), ('Computer Science', 6), ('Education', 1), ('English', 18), ("Women's and Gender Studies", 5), ('Philosophy', 2), ('Biological Sciences', 15), ('Physics', 4), ('Italian Studies', 2), ('History', 7), ('Classical Studies', 2), ('Theatre Studies', 1), ('Sociology', 13), ('Africana Studies', 2), ('Music', 5), ('Political Science', 1), ('Art', 9), ('Unspecified', 6), ('Russian', 1), ('Spanish', 2), ('Art History', 1), ('French', 3), ('Geosciences', 2), ('Economics', 1), ('Peace and Justice Studies', 3), ('Chemistry', 20), ('Psychology', 15)], '2012': [('Classical Studies', 2), ('English', 8), ('Jewish Studies', 1), ('Sociology', 4), ('Music', 8), ('Biological', 1), ('Cognitive and Linguistic Sciences', 2), ('French', 2), ('Geosciences', 2), ('Art', 11), ('Peace and Justice Studies', 1), ('Spanish', 3), ('Unspecified', 6), ('Economics', 9), ('Religion', 5), ('Chemistry', 20), ('Physical Education', 1), ('Environmental Studies', 2), ('Anthropology', 3), ('Psychology', 12), ('Writing', 1), ('Neuroscience', 3), ('Astronomy', 1), ('Political Science', 5), ('Physics', 2), ('East Asian Studies', 6), ('Africana Studies', 2), ('Theatre Studies', 2), ("Women's and Gender Studies", 3), ('Philosophy', 3), ('Biological Sciences', 15), ('Mathematics', 1), ('History', 7), ('Computer Science', 11), ('Classical Studies', 2), ('English', 8), ('Jewish Studies', 1), ('Sociology', 4), ('Music', 8), ('Biological', 1), ('Cognitive and Linguistic Sciences', 2), ('French', 2), ('Geosciences', 2), ('Art', 11), ('Peace and Justice Studies', 1), ('Spanish', 3), ('Unspecified', 6), ('Economics', 9), ('Religion', 5), ('Chemistry', 20), ('Physical Education', 1), ('Environmental Studies', 2), ('Anthropology', 3), ('Psychology', 12), ('Writing', 1), ('Neuroscience', 3), ('Astronomy', 1), ('Political Science', 5), ('Physics', 2), ('East Asian Studies', 6), ('Africana Studies', 2), ('Theatre Studies', 2), ("Women's and Gender Studies", 3), ('Philosophy', 3), ('Biological Sciences', 15), ('Mathematics', 1), ('History', 7), ('Computer Science', 11)], 'G': [('W', 107), ('W', 107)], '1997': [('Economics', 1), ('Religion', 4), ('Biological Sciences', 10), ('Physics', 1), ('Computer Science', 2), ('Psychology', 16), ('Theatre Studies', 1), ("Women's and Gender Studies", 1), ('Spanish', 1), ('History', 1), ('Studio Art', 1), ('Chemistry', 9), ('Chinese', 2), ('Unspecified', 1), ('Sociology', 10), ('Education', 1), ('Jewish Studies', 1), ('Geology', 1), ('Art', 1), ('English', 10), ('Music', 1), ('Astronomy', 1), ('Political Science', 1), ('Economics', 1), ('Religion', 4), ('Biological Sciences', 10), ('Physics', 1), ('Computer Science', 2), ('Psychology', 16), ('Theatre Studies', 1), ("Women's and Gender Studies", 1), ('Spanish', 1), ('History', 1), ('Studio Art', 1), ('Chemistry', 9), ('Chinese', 2), ('Unspecified', 1), ('Sociology', 10), ('Education', 1), ('Jewish Studies', 1), ('Geology', 1), ('Art', 1), ('English', 10), ('Music', 1), ('Astronomy', 1), ('Political Science', 1)], '1999': [('Geology', 2), ('Art', 30), ('English', 16), ('Music', 3), ('Computer Science', 8), ('Astronomy', 1), ('Psychology', 20), ('Economics', 6), ('Biological Sciences', 15), ('Physics', 3), ('Theatre Studies', 2), ('French', 4), ('Unspecified', 5), ('Anthropology', 5), ('Russian', 1), ('Classical Studies', 1), ('Chinese', 2), ('Spanish', 3), ('Philosophy', 6), ('Political Science', 5), ('Italian Studies', 1), ('History', 6), ('Chemistry', 17), ('Sociology', 17), ('Religion', 2), ('Writing', 1), ("Women's and Gender Studies", 2), ('Mathematics', 6), ('Geology', 2), ('Art', 30), ('English', 16), ('Music', 3), ('Computer Science', 8), ('Astronomy', 1), ('Psychology', 20), ('Economics', 6), ('Biological Sciences', 15), ('Physics', 3), ('Theatre Studies', 2), ('French', 4), ('Unspecified', 5), ('Anthropology', 5), ('Russian', 1), ('Classical Studies', 1), ('Chinese', 2), ('Spanish', 3), ('Philosophy', 6), ('Political Science', 5), ('Italian Studies', 1), ('History', 6), ('Chemistry', 17), ('Sociology', 17), ('Religion', 2), ('Writing', 1), ("Women's and Gender Studies", 2), ('Mathematics', 6)], '1998': [('Art History', 3), ('Political Science', 8), ('Italian Studies', 2), ('Peace and Justice Studies', 1), ('Spanish', 4), ('Philosophy', 3), ('Chemistry', 6), ('History', 7), ('Studio Art', 6), ("Women's and Gender Studies", 5), ('Art', 4), ('Music', 2), ('Sociology', 6), ('Religion', 3), ('Writing', 2), ('Education', 1), ('Jewish Studies', 2), ('Mathematics', 3), ('Geology', 3), ('English', 19), ('Computer Science', 7), ('Psychology', 19), ('Physics', 3), ('Economics', 8), ('Biological Science', 1), ('French', 4), ('German', 1), ('Biological Sciences', 15), ('Physical Education', 1), ('Theatre Studies', 2), ('Anthropology', 2), ('Russian', 1), ('Chinese', 1), ('Unspecified', 4), ('Art History', 3), ('Political Science', 8), ('Italian Studies', 2), ('Peace and Justice Studies', 1), ('Spanish', 4), ('Philosophy', 3), ('Chemistry', 6), ('History', 7), ('Studio Art', 6), ("Women's and Gender Studies", 5), ('Art', 4), ('Music', 2), ('Sociology', 6), ('Religion', 3), ('Writing', 2), ('Education', 1), ('Jewish Studies', 2), ('Mathematics', 3), ('Geology', 3), ('English', 19), ('Computer Science', 7), ('Psychology', 19), ('Physics', 3), ('Economics', 8), ('Biological Science', 1), ('French', 4), ('German', 1), ('Biological Sciences', 15), ('Physical Education', 1), ('Theatre Studies', 2), ('Anthropology', 2), ('Russian', 1), ('Chinese', 1), ('Unspecified', 4)], '2002': [('Anthropology', 4), ('Chinese', 2), ("Women's and Gender Studies", 4), ('Psychology', 18), ('French', 4), ('Astronomy', 4), ('Russian', 4), ('Jewish Studies', 1), ('Geology', 2), ('Mathematics', 1), ('Political Science', 13), ('Unspecified', 4), ('Philosophy', 3), ('Sociology', 6), ('Music', 7), ('Spanish', 4), ('Writing', 2), ('English', 8), ('Computer Science', 9), ('Religion', 7), ('International Relations', 2), ('Reproductive lssues', 1), ('German', 2), ('Theatre Studies', 1), ('Classical Studies', 2), ('Japanese', 1), ('History', 4), ('Economics', 10), ('Physics', 3), ('Art', 24), ('Chemistry', 10), ('Biological Sciences', 15), ('Anthropology', 4), ('Chinese', 2), ("Women's and Gender Studies", 4), ('Psychology', 18), ('French', 4), ('Astronomy', 4), ('Russian', 4), ('Jewish Studies', 1), ('Geology', 2), ('Mathematics', 1), ('Political Science', 13), ('Unspecified', 4), ('Philosophy', 3), ('Sociology', 6), ('Music', 7), ('Spanish', 4), ('Writing', 2), ('English', 8), ('Computer Science', 9), ('Religion', 7), ('International Relations', 2), ('Reproductive lssues', 1), ('German', 2), ('Theatre Studies', 1), ('Classical Studies', 2), ('Japanese', 1), ('History', 4), ('Economics', 10), ('Physics', 3), ('Art', 24), ('Chemistry', 10), ('Biological Sciences', 15)], 'i': [('B', 7), ('B', 7)], '2000': [('Astronomy', 2), ('Kenya', 1), ('Geology', 1), ('Studio Art', 11), ('Philosophy', 6), ('Sociology', 9), ('Chinese', 5), ('Music', 5), ('Spanish', 4), ('Psychology', 18), ('Writing', 1), ('French', 7), ('Center for Wildlife Management', 1), ('Physics', 1), ('Unspecified', 6), ('International Relations', 1), ('Art History', 5), ('English', 23), ('Peace and Justice', 1), ('History', 5), ('Computer Science', 12), ('Economics', 5), ('Italian Studies', 3), ('Religion', 3), ('Art', 11), ('Chemistry', 15), ('Biological Sciences', 25), ('Anthropology', 5), ('Political Science', 7), ('Education', 4), ('Theatre Studies', 1), ("Women's and Gender Studies", 6), ('Japanese', 1), ('Astronomy', 2), ('Kenya', 1), ('Geology', 1), ('Studio Art', 11), ('Philosophy', 6), ('Sociology', 9), ('Chinese', 5), ('Music', 5), ('Spanish', 4), ('Psychology', 18), ('Writing', 1), ('French', 7), ('Center for Wildlife Management', 1), ('Physics', 1), ('Unspecified', 6), ('International Relations', 1), ('Art History', 5), ('English', 23), ('Peace and Justice', 1), ('History', 5), ('Computer Science', 12), ('Economics', 5), ('Italian Studies', 3), ('Religion', 3), ('Art', 11), ('Chemistry', 15), ('Biological Sciences', 25), ('Anthropology', 5), ('Political Science', 7), ('Education', 4), ('Theatre Studies', 1), ("Women's and Gender Studies", 6), ('Japanese', 1)], '2001': [('English', 14), ('Unspecified', 6), ('History', 10), ('Art History', 2), ('Computer Science', 13), ('Economics', 7), ('Religion', 4), ('Chemistry', 25), ('Biological Sciences', 15), ('Physics', 7), ('Quantitative Reasoning', 1), ('Art', 22), ('Education', 5), ('Theatre Studies', 1), ("Women's and Gender Studies", 6), ('Classical Studies', 5), ('Japanese', 1), ('Anthropology', 1), ('Studio Art', 1), ('Philosophy', 1), ('Sociology', 11), ('Political Science', 8), ('Spanish', 2), ('Russian', 1), ('Psychology', 22), ('Writing', 1), ('Biology', 1), ('Mathematics', 2), ('Biochemistry', 1), ('Chinese', 6), ('Music', 6), ('French', 2), ('Peace and Justice Studies', 1), ('English', 14), ('Unspecified', 6), ('History', 10), ('Art History', 2), ('Computer Science', 13), ('Economics', 7), ('Religion', 4), ('Chemistry', 25), ('Biological Sciences', 15), ('Physics', 7), ('Quantitative Reasoning', 1), ('Art', 22), ('Education', 5), ('Theatre Studies', 1), ("Women's and Gender Studies", 6), ('Classical Studies', 5), ('Japanese', 1), ('Anthropology', 1), ('Studio Art', 1), ('Philosophy', 1), ('Sociology', 11), ('Political Science', 8), ('Spanish', 2), ('Russian', 1), ('Psychology', 22), ('Writing', 1), ('Biology', 1), ('Mathematics', 2), ('Biochemistry', 1), ('Chinese', 6), ('Music', 6), ('French', 2), ('Peace and Justice Studies', 1)], '2006': [('Music', 7), ('Spanish', 8), ('Theatre Studies', 3), ('Political Science', 1), ('Economics', 6), ('Computer Science', 1), ('Chemistry', 22), ('Africana Studies', 2), ('Religion', 1), ('Anthropology', 1), ('Education', 2), ("Women's and Gender Studies", 5), ('Cognitive and Linguistic Sciences', 1), ('French', 2), ('English', 8), ('Astronomy', 3), ('History', 2), ('Physics', 2), ('Art', 5), ('Unspecified', 3), ('Philosophy', 2), ('Sociology', 7), ('Biological Sciences', 10), ('Information Services', 1), ('East Asian Studies', 1), ('Psychology', 5), ('Neuroscience', 1), ('Geosciences', 1), ('Peace and Justice Studies', 1), ('Jewish Studies', 2), ('Music', 7), ('Spanish', 8), ('Theatre Studies', 3), ('Political Science', 1), ('Economics', 6), ('Computer Science', 1), ('Chemistry', 22), ('Africana Studies', 2), ('Religion', 1), ('Anthropology', 1), ('Education', 2), ("Women's and Gender Studies", 5), ('Cognitive and Linguistic Sciences', 1), ('French', 2), ('English', 8), ('Astronomy', 3), ('History', 2), ('Physics', 2), ('Art', 5), ('Unspecified', 3), ('Philosophy', 2), ('Sociology', 7), ('Biological Sciences', 10), ('Information Services', 1), ('East Asian Studies', 1), ('Psychology', 5), ('Neuroscience', 1), ('Geosciences', 1), ('Peace and Justice Studies', 1), ('Jewish Studies', 2)], '2007': [('French', 5), ('Philosophy', 1), ('Sociology', 5), ('Biological Sciences', 15), ('Russian', 1), ('Physics', 2), ('Art', 6), ('Unspecified', 2), ('English', 11), ('Psychology', 6), ('Geosciences', 2), ('East Asian Studies', 3), ('Jewish Studies', 1), ('Spanish', 3), ('Theatre Studies', 1), ('Economics', 14), ('German', 1), ('Political Science', 5), ('Music', 4), ('Computer Science', 7), ('Chemistry', 19), ('Africana Studies', 2), ('Biological Chemistry', 1), ('Education', 1), ('South Asian Studies', 1), ('Middle Eastern Studies', 1), ('Astronomy', 1), ('Anthropology', 3), ("Women's and Gender Studies", 6), ('Religion', 3), ('History', 5), ('French', 5), ('Philosophy', 1), ('Sociology', 5), ('Biological Sciences', 15), ('Russian', 1), ('Physics', 2), ('Art', 6), ('Unspecified', 2), ('English', 11), ('Psychology', 6), ('Geosciences', 2), ('East Asian Studies', 3), ('Jewish Studies', 1), ('Spanish', 3), ('Theatre Studies', 1), ('Economics', 14), ('German', 1), ('Political Science', 5), ('Music', 4), ('Computer Science', 7), ('Chemistry', 19), ('Africana Studies', 2), ('Biological Chemistry', 1), ('Education', 1), ('South Asian Studies', 1), ('Middle Eastern Studies', 1), ('Astronomy', 1), ('Anthropology', 3), ("Women's and Gender Studies", 6), ('Religion', 3), ('History', 5)], '2004': [('Religion', 6), ('Chemistry', 12), ('Political Science', 8), ('Theatre Studies', 1), ("Women's and Gender Studies", 3), ('Astronomy', 2), ('Mathematics', 1), ('History', 6), ('Computer Science', 2), ('Physics', 6), ('Art', 3), ('Philosophy', 1), ('Sociology', 3), ('Biological Sciences', 14), ('French', 1), ('Classical Studies', 1), ('Japanese', 1), ('English', 4), ('Unspecified', 5), ('Africana Studies', 1), ('Geology', 3), ('Music', 4), ('Spanish', 1), ('Psychology', 4), ('Writing', 3), ('Economics', 4), ('Religion', 6), ('Chemistry', 12), ('Political Science', 8), ('Theatre Studies', 1), ("Women's and Gender Studies", 3), ('Astronomy', 2), ('Mathematics', 1), ('History', 6), ('Computer Science', 2), ('Physics', 6), ('Art', 3), ('Philosophy', 1), ('Sociology', 3), ('Biological Sciences', 14), ('French', 1), ('Classical Studies', 1), ('Japanese', 1), ('English', 4), ('Unspecified', 5), ('Africana Studies', 1), ('Geology', 3), ('Music', 4), ('Spanish', 1), ('Psychology', 4), ('Writing', 3), ('Economics', 4)], '2005': [('Italian Studies', 1), ('Art', 8), ('Chemistry', 34), ('Unspecified', 5), ('Classical Studies', 2), ('Japanese', 1), ('Russian', 1), ('Jewish Studies', 1), ('Africana Studies', 1), ('Peace and Justice Studies', 1), ('Physical Education', 1), ('Middle Eastern Studies', 1), ('Spanish', 3), ('Psychology', 13), ('Writing', 1), ('Art History', 1), ('Philosophy', 5), ('Geosciences', 3), ('Economics', 7), ('Religion', 2), ('East Asian Studies', 1), ('Music', 3), ('Mathematics', 2), ('Education', 1), ('Theatre Studies', 1), ('English', 7), ('Environmental Studies', 2), ('Astronomy', 1), ('Anthropology', 5), ('Political Science', 8), ('History', 10), ('Computer Science', 4), ('Sociology', 1), ('Biological Sciences', 25), ("Women's and Gender Studies", 2), ('Physics', 8), ('Italian Studies', 1), ('Art', 8), ('Chemistry', 34), ('Unspecified', 5), ('Classical Studies', 2), ('Japanese', 1), ('Russian', 1), ('Jewish Studies', 1), ('Africana Studies', 1), ('Peace and Justice Studies', 1), ('Physical Education', 1), ('Middle Eastern Studies', 1), ('Spanish', 3), ('Psychology', 13), ('Writing', 1), ('Art History', 1), ('Philosophy', 5), ('Geosciences', 3), ('Economics', 7), ('Religion', 2), ('East Asian Studies', 1), ('Music', 3), ('Mathematics', 2), ('Education', 1), ('Theatre Studies', 1), ('English', 7), ('Environmental Studies', 2), ('Astronomy', 1), ('Anthropology', 5), ('Political Science', 8), ('History', 10), ('Computer Science', 4), ('Sociology', 1), ('Biological Sciences', 25), ("Women's and Gender Studies", 2), ('Physics', 8)], '2008': [('Cognitive and Linguistic Sciences', 1), ('Unspecified', 2), ('Cinema and Media Studies', 1), ('Economics', 9), ('Geosciences', 1), ('Physics', 1), ('Italian Studies', 2), ('Religion', 1), ('Chemistry', 19), ('Biological Sciences', 23), ('Anthropology', 1), ('Neuroscience', 9), ('History', 10), ('Computer Science', 2), ('Education', 1), ('Art', 12), ('Astronomy', 1), ('Political Science', 7), ('East Asian Studies', 2), ('Theatre Studies', 1), ("Women's and Gender Studies", 16), ('Spanish', 2), ('Mathematics', 1), ('Sociology', 4), ('Music', 6), ('Psychology', 16), ('French', 1), ('Jewish Studies', 1), ('English', 13), ('Peace and Justice Studies', 1), ('Cognitive and Linguistic Sciences', 1), ('Unspecified', 2), ('Cinema and Media Studies', 1), ('Economics', 9), ('Geosciences', 1), ('Physics', 1), ('Italian Studies', 2), ('Religion', 1), ('Chemistry', 19), ('Biological Sciences', 23), ('Anthropology', 1), ('Neuroscience', 9), ('History', 10), ('Computer Science', 2), ('Education', 1), ('Art', 12), ('Astronomy', 1), ('Political Science', 7), ('East Asian Studies', 2), ('Theatre Studies', 1), ("Women's and Gender Studies", 16), ('Spanish', 2), ('Mathematics', 1), ('Sociology', 4), ('Music', 6), ('Psychology', 16), ('French', 1), ('Jewish Studies', 1), ('English', 13), ('Peace and Justice Studies', 1)], '2009': [('Spanish', 4), ('East Asian Studies', 5), ('Physical Education', 1), ('Neuroscience', 5), ('Psychology', 14), ('Sociology', 5), ('English', 10), ('Environmental Studies', 2), ('Mathematics', 1), ('Music', 6), ('Russian', 1), ('Economics', 11), ('Religion', 3), ('Peace and Justice Studies', 1), ('Chemistry', 15), ('Geosciences', 1), ('Biological Sciences', 16), ('Physics', 4), ('Italian Studies', 1), ('Africana Studies', 1), ('History', 6), ('Computer Science', 7), ('Education', 1), ('Chemistry Department', 1), ('Astronomy', 3), ('Anthropology', 5), ('Political Science', 7), ('French', 3), ('Unspecified', 1), ('Philosophy', 2), ('Art', 8), ('Theatre Studies', 1), ("Women's and Gender Studies", 8), ('Spanish', 4), ('East Asian Studies', 5), ('Physical Education', 1), ('Neuroscience', 5), ('Psychology', 14), ('Sociology', 5), ('English', 10), ('Environmental Studies', 2), ('Mathematics', 1), ('Music', 6), ('Russian', 1), ('Economics', 11), ('Religion', 3), ('Peace and Justice Studies', 1), ('Chemistry', 15), ('Geosciences', 1), ('Biological Sciences', 16), ('Physics', 4), ('Italian Studies', 1), ('Africana Studies', 1), ('History', 6), ('Computer Science', 7), ('Education', 1), ('Chemistry Department', 1), ('Astronomy', 3), ('Anthropology', 5), ('Political Science', 7), ('French', 3), ('Unspecified', 1), ('Philosophy', 2), ('Art', 8), ('Theatre Studies', 1), ("Women's and Gender Studies", 8)]}

# One can create more than one plot and store them in a list, which will be
# turned into JSON to be passed to the client.
def make_bar_chart(choice):
    graphs = [
              dict(
                   data=[
                         dict(
                              x = [t[0] for t in countsDct[choice]], #depts
                              y = [t[1] for t in countsDct[choice]], #counts per dept
                              type = 'bar'
                              ),
                         ],
                   layout=dict(
                               title = "Number of Presentations by Department, " + choice
                               )
                   )
              ]
              # Convert the figures to JSON
    graphJSON = json.dumps(graphs, cls=plotly.utils.PlotlyJSONEncoder)
    print(graphJSON)
    return graphJSON


class ChoiceForm(Form):
    #name = StringField('What is your name?', validators=[Required(), Length(1, 16)])

    choice = SelectField(u'Choose a year:', choices=[("1998", "1998"),
                                                                        ("1999", "1999"),
                                                                        ("2000", "2000"),
                                                                        ("2001", "2001"),
                                                                        ("2002", "2002"),
                                                                        ("2003", "2003"),
                                                                        ("2004", "2004"),
                                                                        ("2005", "2005"),
                                                                        ("2006", "2006"),
                                                                        ("2007", "2007"),
                                                                        ("2008", "2008"),
                                                                        ("2009", "2009"),
                                                                        ("2010", "2010"),
                                                                        ("2011", "2011"),
                                                                        ("2012", "2012"),
                                                                        ("2013", "2013"),
                                                                        ("2014", "2014"),
                                                                        ("2015", "2015"),
                                                                        ("2016", "2016")
                                                 ])
    submit = SubmitField('Submit')


@app.route('/', methods=['GET', 'POST'])
def index():

    choice = None
    ids = []
    graphJSON = []
    #ruhlman_data = pd.read_excel('test.xlsx')
    form = ChoiceForm()
    if form.validate_on_submit():
        choice = form.choice.data
        if choice != "blank":
            graphJSON = make_bar_chart(choice)
            ids = ["Bar Chart, Faculty Department Counts for {}".format(choice)]
        form.choice.data = ''
    return render_template('index.html', form=form, choice=choice,
                           graphJSON=graphJSON,
                           ids=ids) #data = ruhlman_data.to_html())


if __name__ == '__main__':
    app.run(debug=True, port = 7000)
    #app.run(host='0.0.0.0', port = 1561, debug=True)
